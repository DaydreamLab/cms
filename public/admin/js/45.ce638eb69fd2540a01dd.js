webpackJsonp([45],{A37C:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("b6Cg"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e};t.default={name:"user-edit",mixins:[i.a],data:function(){return{fields:{group_ids:{list:[],custom_attrs:{children:"children",label:"title"}}},default_value:{first_name:"",last_name:"",email:"",password:"",password_confirmation:"",reset_password:"0",group_ids:[],activation:1,block:0}}},created:function(){var e=this;this.$$eventBus.$on("onClickUSERFormDataToolbar",function(t){switch(t.type){case"cancel":e.$onCancel();break;case"save":case"savenclose":case"savenadd":e.onSubmit({ref:"form-data",type:t.type,data:e.default_value});break;case"trash":e.onTrash()}}),this.onUpdateFieldList(),this.$$eventBus.$emit("onInitToolbar",{name:"USERFormData",data:this.toolbar})},beforeDestroy:function(){this.$$eventBus.$emit("onInitToolbar",{name:"USERFormData",data:{}}),this.$$eventBus.$off("onClickUSERFormDataToolbar")},methods:{onTrash:function(){var e=this;this.$$api_user_updateBlock({data:{ids:[this.params.id],block:1},fn:function(t){var a=t.msg;e.$message.success(a),e.$onCancel()}})},onCheckGroupChange:function(){this.default_value.group_ids=this.$refs.groupTree.getCheckedKeys()},onSubmit:function(e){var t=this,a=e.data,i=(e.info,e.type),s=a;this.params.id&&(s.id=this.params.id),this.$$api_user_save({data:s,fn:function(e){var a=e.data,r=e.msg;t.$message.success(r),a&&(s.id=a.items.id),t.$onSubmitFinish({type:i,query:{id:s.id}})}})},$onCancel:function(){this.$router.push(this.$route.path.replace("/edit",""))},onGetView:function(){var e=this;this.$$api_user_get({pathVar:this.params.id,fn:function(t){var a=t.data;e.default_value=s({},e.default_value,a.items,{group_ids:a.items.groups.map(function(e){return e.id})})}})},onUpdateFieldList:function(){var e=this;this.$$api_user_listTreeGroup({fn:function(t){var a=t.data;e.fields.group_ids.list=a.items}})}}}},b6Cg:function(e,t,a){"use strict";t.a={data:function(){return{params:{id:"",pid:""},toolbar:{type:"edit"}}},watch:{$route:function(){this.$initView()}},created:function(){this.$initView()},methods:{$onSubmitFinish:function(e){var t=e.type,a=e.query;switch(t){case"save":this.$router.push({path:this.$route.path,query:a});break;case"savenadd":this.$router.push({path:this.$route.path}),this.$router.go(0);break;case"savenclose":this.$onCancel()}},$onCancel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&this.handleCheckout(e),this.$router.push({path:this.$route.path.replace("/edit",""),query:this.$route.query.from})},onUpdateViewParams:function(){this.params.id=parseInt(this.$route.query.id)||"",this.params.pid=parseInt(this.$route.query.pid)||1,this.$set(this.toolbar,"type",this.params.id?"edit":"add")},$initView:function(){this.onUpdateViewParams(),this.params.id&&this.onGetView()}}}},jgiN:function(e,t,a){var i=a("VU/8")(a("A37C"),a("qa1T"),!1,null,null,null);e.exports=i.exports},qa1T:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:e.$t("USER_TAB_DETAIL")}},[a("el-form",{ref:"form-data",attrs:{"label-position":"top",model:e.default_value}},[a("el-form-item",{attrs:{label:e.$t("USER_OPTION_ACTIVE")}},[a("el-switch",{attrs:{"active-text":e.$t("YES"),"active-value":1,"inactive-text":e.$t("NO"),"inactive-value":0},model:{value:e.default_value.activation,callback:function(t){e.$set(e.default_value,"activation",t)},expression:"default_value.activation"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"first_name",label:e.$t("USER_FIELD_FIRST_NAME")}},[a("el-input",{model:{value:e.default_value.first_name,callback:function(t){e.$set(e.default_value,"first_name",t)},expression:"default_value.first_name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"last_name",label:e.$t("USER_FIELD_LAST_NAME")}},[a("el-input",{model:{value:e.default_value.last_name,callback:function(t){e.$set(e.default_value,"last_name",t)},expression:"default_value.last_name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"email",label:e.$t("USER_FIELD_EMAIL")}},[a("el-input",{model:{value:e.default_value.email,callback:function(t){e.$set(e.default_value,"email",t)},expression:"default_value.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password",label:e.$t("USER_FIELD_PASSWORD")}},[a("el-input",{model:{value:e.default_value.password,callback:function(t){e.$set(e.default_value,"password",t)},expression:"default_value.password"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password_confirmation",label:e.$t("USER_FIELD_PASSWORD_CONFIRMATION")}},[a("el-input",{model:{value:e.default_value.password_confirmation,callback:function(t){e.$set(e.default_value,"password_confirmation",t)},expression:"default_value.password_confirmation"}})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("USER_TAB_ASSIGN_GROUP")}},[a("el-form",{ref:"form-data",attrs:{"label-position":"top",model:e.default_value}},[a("el-form-item",{attrs:{prop:"group_ids"}},[a("el-tree",{ref:"groupTree",attrs:{data:e.fields.group_ids.list,"default-checked-keys":e.default_value.group_ids,"default-expanded-keys":e.default_value.group_ids,props:e.fields.group_ids.custom_attrs,"node-key":"id","check-strictly":"","show-checkbox":""},on:{"check-change":e.onCheckGroupChange}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]}}});