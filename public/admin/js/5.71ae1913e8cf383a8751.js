webpackJsonp([5],{"3DSn":function(t,e,a){var i=a("JvWl");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("21e7da1f",i,!0,{})},JvWl:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".el-collapse-item__header[data-v-aaf79f1c]{cursor:auto;padding-left:8px}.el-collapse-item__header.is-disabled[data-v-aaf79f1c]{cursor:not-allowed;background:#e6e6e6}",""])},aXTa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t};e.default={components:{MediaInput:function(){return a.e(72).then(a.bind(null,"Jvbl"))},FieldForm:function(){return a.e(82).then(a.bind(null,"U+D9"))}},props:{category:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},type:{type:String,required:!0},isActive:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},data:function(){return{fields:{extrafield_group_id:{list:this.$store.getters.extrafield_group_list,custom_attrs:{label:"title",value:"id"}}},default_value:{id:"",title:"",link:"",introtext:"",description:"",category_id:"",language:"",image:"",state:1,featured:0,extrafield_group_id:"",extrafields:{}},save_loading:!1,form_label_map:{slideshow:{title:"Slide 標題",image:"背景圖片"},link:{image:"Logo",title:"連結標題",link:"連結網址",description:"連結描述"},menu:{title:"菜名",introtext:"描述",description:"價錢"},timeline:{title:"標題",description:"描述"}}}},computed:{groupFields:function(){return this.fields.extrafield_group_id.list[this.default_value.extrafield_group_id]}},mounted:function(){this.onFillForm()},methods:{onClickBtnDelete:function(t){var e=this;this.$$api_item_delete({data:{ids:[t]},fn:function(t){var a=t.msg;e.$message.success(a),e.$emit("update")}})},onClickBtnSave:function(){var t=this;this.save_loading=!0,this.category&&(this.default_value.category_id=this.category.id,this.default_value.language=this.category.language),this.$$api_item_save({data:this.default_value,fn:function(e){e.data;var a=e.msg;t.$message.success(a),t.$emit("update"),t.onUpdateActiveItem()},finalFn:function(){t.save_loading=!1}})},onUpdateActiveItem:function(t){this.$emit("updateActive",t)},onFillForm:function(){this.default_value=i({},this.default_value,this.data)}}}},s7tS:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-collapse-item"},[a("div",{staticClass:"el-collapse-item__header",class:{"is-disabled":t.isDisabled}},[a("el-button",{staticClass:"sortable-handler",attrs:{disabled:t.isDisabled,type:"text"}},[a("font-awesome-icon",{attrs:{icon:["fal","arrows"]}})],1),t._v("\n    "+t._s(t.data.title)+"\n    "),a("div",{staticClass:"el-collapse-item__arrow"},[t.isActive?[a("el-tooltip",{attrs:{effect:"dark",content:t.$t("TOOLBAR_CANCEL"),placement:"top-start"}},[a("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.onUpdateActiveItem()}}},[a("font-awesome-icon",{attrs:{icon:["fal","times"]}})],1)],1),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:t.$t("TOOLBAR_SAVE"),placement:"top-start"}},[a("el-button",{attrs:{loading:t.save_loading,type:"primary",size:"small"},on:{click:t.onClickBtnSave}},[a("font-awesome-icon",{attrs:{icon:["fal","save"]}})],1)],1)]:[a("el-tooltip",{attrs:{effect:"dark",content:t.$t("TOOLBAR_EDIT"),placement:"top-start"}},[a("el-button",{attrs:{disabled:t.isDisabled,type:"primary",size:"small",plain:""},on:{click:function(e){t.onUpdateActiveItem(t.data.id)}}},[a("font-awesome-icon",{attrs:{icon:["fal","edit"]}})],1)],1),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:t.$t("TOOLBAR_DELETE"),placement:"top-start"}},[a("el-button",{attrs:{disabled:t.isDisabled,type:"danger",size:"small",plain:""},on:{click:function(e){t.onClickBtnDelete(t.data.id)}}},[a("font-awesome-icon",{attrs:{icon:["fal","trash-alt"]}})],1)],1)]],2)],1),t._v(" "),t.isActive?a("div",{staticClass:"el-collapse-item__wrap"},[a("el-form",{ref:"form-data",attrs:{model:t.default_value}},[t._l(t.form_label_map[t.type],function(e,i){return[a("el-form-item",{attrs:{prop:i,label:t.form_label_map[t.type][i]}},"image"===i?[a("MediaInput",{attrs:{Data:t.default_value[i]},on:{onClickBtnSelect:function(e){return t.default_value[i]=e}}})]:[a("el-input",{model:{value:t.default_value[i],callback:function(e){t.$set(t.default_value,i,e)},expression:"default_value[key]"}})],1)]}),t._v(" "),t.groupFields&&"extrafields"in t.groupFields?a("FieldForm",{attrs:{fields:t.groupFields.extrafields,data:t.default_value.extrafields},on:{"update:data":function(e){t.$set(t.default_value,"extrafields",e)}}}):t._e()],2)],1):t._e()])},staticRenderFns:[]}},t2Pn:function(t,e,a){var i=a("VU/8")(a("aXTa"),a("s7tS"),!1,function(t){a("3DSn")},"data-v-aaf79f1c",null);t.exports=i.exports}});