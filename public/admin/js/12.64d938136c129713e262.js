webpackJsonp([12],{"9//p":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("h+Z4"),r=i("nNQx"),o=i("PKPN");e.default={name:"field-list",mixins:[n.a,r.a,o.a],data:function(){var t=this;return{fields:[{key:"title",label:this.$t("FIELD_TITLE_LABEL"),type:"editable"},{key:"alias",label:this.$t("FIELD_ALIAS_LABEL")},{key:"group_title",label:this.$t("OPTION_CATEGORY")},{key:"type",label:this.$t("OPTION_TYPE")},{key:"state",label:this.$t("OPTION_STATE"),type:"icon-label",width:"90",formatter:function(t){return{color:"item_state_"+t+"_color",icon:["fal",1===t?"check":"times"]}}},{width:"60",key:"id",label:this.$t("LIST_DATA_HEADING_ID")}],toolbar:{type:"list",custom:[{text:this.$t("TOOLBAR_CHECKOUT"),method:"checkout",fn:function(e){var i=e.ids;t.onClickBtnCheckout({ids:i})}}]},searchbar:{fields:[{key:"search",desc:this.$t("TOOLBAR_KEYWORDS"),clearable:!0},{key:"state",type:"select",desc:this.$t("OPTION_STATE"),clearable:!0,list:[{value:"1",text:this.$t("PUBLISHED")},{value:"0",text:this.$t("UNPUBLISHED")},{value:"-1",text:this.$t("ARCHIVED")},{value:"-2",text:this.$t("TRASHED")}]},{key:"group_id",type:"select",desc:this.$t("OPTION_CATEGORY"),list:this.$store.getters.extrafield_group_list,clearable:!0,custom_attrs:{label:"title",value:"id"}},{key:"type",type:"select",desc:this.$t("OPTION_TYPE"),clearable:!0,list:[{value:"textfield",text:this.$t("EXTRAFIELD_TYPE_TEXTFIELD")},{value:"textarea",text:this.$t("EXTRAFIELD_TYPE_TEXTAREA")},{value:"select",text:this.$t("EXTRAFIELD_TYPE_SELECT")},{value:"multipleSelect",text:this.$t("EXTRAFIELD_TYPE_MULTIPLESELECT")},{value:"radio",text:this.$t("EXTRAFIELD_TYPE_RADIO")},{value:"link",text:this.$t("EXTRAFIELD_TYPE_LINK")},{value:"date",text:this.$t("EXTRAFIELD_TYPE_DATE"),formatter:function(e){return t.$options.filters.displayDateFormat(e.date)}},{value:"textarea",text:this.$t("EXTRAFIELD_TYPE_IMAGE")}]}],default_value:{search:"",state:"",group_id:"",type:""}}}},created:function(){this.$getFieldList({extrafield_group:2},"searchbar")},methods:{onClickBtnCheckout:function(t){var e=this,i=t.data,n=t.ids,r=n||[i.id];this.$$api_field_checkout({data:{ids:r},fn:function(t){var i=t.msg;e.$message.success(i),e.$onGetList()}})},onClickBtnBatchDelete:function(t){var e=this,i=t.ids;t.datas;this.$confirm(this.$t("GLOBAL_CONFIRM_DELETE")).then(function(){e.$$api_field_delete({data:{ids:i},fn:function(t){t.data;e.$onGetList()}})})},handleEditQuery:function(t){var e=t.data;this.$onClickBntEdit({id:e.id})},handleGetList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.page_data,n=e.fn;this.$$api_field_list({data:i,fn:function(e){var i=e.data;t.list_loading.flag=!1,t.list=i.items,t.paginations.total=i.pagination.total,n&&n()}})}}}},JeHt:function(t,e,i){"use strict";function n(t){return!(!t||"function"!=typeof t.hasOwnProperty||!(t.hasOwnProperty("__ownerID")||t._map&&t._map.hasOwnProperty("__ownerID")))}function r(t,e,i){return Object.keys(t).reduce(function(e,n){var r=""+n;return e.has(r)?e.set(r,i(e.get(r),t[r])):e},e)}i.d(e,"b",function(){return O}),i.d(e,"a",function(){return S});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},c=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},l=function(t){return function(e){return n(e)?e.get(t):e[t]}},f=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a(this,t),!e||"string"!=typeof e)throw new Error("Expected a string key for Entity, but found "+e+".");var r=n.idAttribute,o=void 0===r?"id":r,s=n.mergeStrategy,c=void 0===s?function(t,e){return u({},t,e)}:s,h=n.processStrategy,f=void 0===h?function(t){return u({},t)}:h;this._key=e,this._getId="function"==typeof o?o:l(o),this._idAttribute=o,this._mergeStrategy=c,this._processStrategy=f,this.define(i)}return t.prototype.define=function(t){this.schema=Object.keys(t).reduce(function(e,i){var n,r=t[i];return u({},e,((n={})[i]=r,n))},this.schema||{})},t.prototype.getId=function(t,e,i){return this._getId(t,e,i)},t.prototype.merge=function(t,e){return this._mergeStrategy(t,e)},t.prototype.normalize=function(t,e,i,n,r){var a=this,s=this._processStrategy(t,e,i);return Object.keys(this.schema).forEach(function(t){if(s.hasOwnProperty(t)&&"object"===o(s[t])){var e=a.schema[t];s[t]=n(s[t],s,t,e,r)}}),r(this,s,t,e,i),this.getId(t,e,i)},t.prototype.denormalize=function(t,e){var i=this;return n(t)?r(this.schema,t,e):(Object.keys(this.schema).forEach(function(n){if(t.hasOwnProperty(n)){var r=i.schema[n];t[n]=e(t[n],r)}}),t)},s(t,[{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),t}(),p=function(){function t(e,i){a(this,t),i&&(this._schemaAttribute="string"==typeof i?function(t){return t[i]}:i),this.define(e)}return t.prototype.define=function(t){this.schema=t},t.prototype.getSchemaAttribute=function(t,e,i){return!this.isSingleSchema&&this._schemaAttribute(t,e,i)},t.prototype.inferSchema=function(t,e,i){if(this.isSingleSchema)return this.schema;var n=this.getSchemaAttribute(t,e,i);return this.schema[n]},t.prototype.normalizeValue=function(t,e,i,n,r){var o=this.inferSchema(t,e,i);if(!o)return t;var a=n(t,e,i,o,r);return this.isSingleSchema||void 0===a||null===a?a:{id:a,schema:this.getSchemaAttribute(t,e,i)}},t.prototype.denormalizeValue=function(t,e){var i=n(t)?t.get("schema"):t.schema;if(!this.isSingleSchema&&!i)return t;var r=n(t)?t.get("id"):t.id,o=this.isSingleSchema?this.schema:this.schema[i];return e(r||t,o)},s(t,[{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),t}(),d=function(t){function e(i,n){if(a(this,e),!n)throw new Error('Expected option "schemaAttribute" not found on UnionSchema.');return h(this,t.call(this,i,n))}return c(e,t),e.prototype.normalize=function(t,e,i,n,r){return this.normalizeValue(t,e,i,n,r)},e.prototype.denormalize=function(t,e){return this.denormalizeValue(t,e)},e}(p),y=function(t){function e(){return a(this,e),h(this,t.apply(this,arguments))}return c(e,t),e.prototype.normalize=function(t,e,i,n,r){var o=this;return Object.keys(t).reduce(function(e,i,a){var s,c=t[i];return void 0!==c&&null!==c?u({},e,((s={})[i]=o.normalizeValue(c,t,i,n,r),s)):e},{})},e.prototype.denormalize=function(t,e){var i=this;return Object.keys(t).reduce(function(n,r){var o,a=t[r];return u({},n,((o={})[r]=i.denormalizeValue(a,e),o))},{})},e}(p),g=function(t){if(Array.isArray(t)&&t.length>1)throw new Error("Expected schema definition to be a single schema, but found "+t.length+".");return t[0]},m=function(t){return Array.isArray(t)?t:Object.keys(t).map(function(e){return t[e]})},_=function(t,e,i,n,r,o){return t=g(t),m(e).map(function(e,a){return r(e,i,n,t,o)})},v=function(t){function e(){return a(this,e),h(this,t.apply(this,arguments))}return c(e,t),e.prototype.normalize=function(t,e,i,n,r){var o=this;return m(t).map(function(t,a){return o.normalizeValue(t,e,i,n,r)}).filter(function(t){return void 0!==t&&null!==t})},e.prototype.denormalize=function(t,e){var i=this;return t&&t.map?t.map(function(t){return i.denormalizeValue(t,e)}):t},e}(p),b=function(t,e,i,n,r,o){var a=u({},e);return Object.keys(t).forEach(function(i){var n=t[i],s=r(e[i],e,i,n,o);void 0===s||null===s?delete a[i]:a[i]=s}),a},$=function(t,e,i){if(n(e))return r(t,e,i);var o=u({},e);return Object.keys(t).forEach(function(e){o[e]&&(o[e]=i(o[e],t[e]))}),o},E=function(){function t(e){a(this,t),this.define(e)}return t.prototype.define=function(t){this.schema=Object.keys(t).reduce(function(e,i){var n,r=t[i];return u({},e,((n={})[i]=r,n))},this.schema||{})},t.prototype.normalize=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return b.apply(void 0,[this.schema].concat(e))},t.prototype.denormalize=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return $.apply(void 0,[this.schema].concat(e))},t}(),O={Array:v,Entity:f,Object:E,Union:d,Values:y},S=function(t,e){if(!t||"object"!==(void 0===t?"undefined":o(t)))throw new Error('Unexpected input given to normalize. Expected type to be "object", found "'+(void 0===t?"undefined":o(t))+'".');var i={},n=function(t){return function(e,i,n,r,o){var a=e.key,s=e.getId(n,r,o);a in t||(t[a]={});var u=t[a][s];t[a][s]=u?e.merge(u,i):i}}(i);return{entities:i,result:function t(e,i,n,r,a){return"object"===(void 0===e?"undefined":o(e))&&e?"object"!==(void 0===r?"undefined":o(r))||r.normalize&&"function"==typeof r.normalize?r.normalize(e,i,n,t,a):(Array.isArray(r)?_:b)(r,e,i,n,t,a):e}(t,t,null,e,n)}}},JuZl:function(t,e,i){var n=i("PRuj");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("71c34e84",n,!0,{})},PKPN:function(t,e,i){"use strict";e.a={methods:{$initList:function(){this.$set(this.toolbar,"type","-2"===this.$route.query.state?"trash":"list"),this.$onGetList()}}}},PRuj:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},"h+Z4":function(t,e,i){"use strict";var n=i("JeHt");e.a={methods:{$handleGetFieldList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];this.$$api_option_list({data:{types:t},fn:function(o){var a=o.data;t.forEach(function(t){if("extrafield_group"===t){a.items[t].unshift({id:0,value:"",title:e.$t("OPTION_NONE")});var o=new n.b.Entity("groups"),s=Object(n.a)(a.items[t],[o]);e.handleUpdateField(t,s.entities.groups,i[t],r)}else e.handleUpdateField(t,a.items,i[t],r)})}})},$getFieldList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],n=Object.keys(e).filter(function(e){return!t.checkStoreField(e)});n.length>0&&this.$handleGetFieldList(n,e,i)},handleUpdateField:function(t,e,i,n){this.onUpdateStoreFieldList(t,e[t]||e),n?this.onUpdateSearchbarFieldList(t,i):this.onUpdateFieldList(t,i)},onUpdateFieldList:function(t,e){this.fields[e].list=this.$store.getters[t+"_list"]},onUpdateSearchbarFieldList:function(t,e){this.searchbar.fields[e].list=this.$store.getters[t+"_list"]},onUpdateStoreFieldList:function(t,e){if("language"===t){var i={sef:"*",title:this.$t("ALL_LANGUAGE")};e.unshift(i)}"item_category"!==t&&"menu_category"!==t||(e[0].tree_list_title=e[0].tree_list_title.replace("ROOT",this.$t("GLOBAL_ROOT"))),this.$store.dispatch("update_option_related_list",{type:t,data:e})},checkStoreField:function(t){return Boolean(this.$store.getters[t+"_list"])}}}},nNQx:function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.a={data:function(){return{list:[],list_loading:{flag:!1},paginations:{current_page:1,total:0,page_size:10,page_sizes:[10,15,20,25,50,100],layout:"total, sizes, prev, pager, next, jumper"}}},watch:{$route:{handler:"$initList",immediate:!0}},methods:{$onClickBtnAdd:function(){this.$router.push(this.$route.path+"/edit")},$onClickBntEdit:function(t){this.$router.push({path:this.$route.path+"/edit",query:r({},t,{from:this.$route.query})})},$onSearchReset:function(){this.$router.push({path:this.$route.path})},$onSearch:function(t){var e=t.data,i={},n=this.$route.query;for(var r in n)i[r]=n[r];for(var o in e)i[o]=e[o],i[o]||delete i[o];this.$router.push({path:this.$route.path,query:i})},setRouteQuery:function(t,e){var i=Object.assign({},this.$route.query);return"object"===(void 0===t?"undefined":n(t))?i=t:i[t]=e,i},getRouteQuery:function(){var t=this,e=this.$route.query,i=["id","pid","category_id","access"],n=["start_date","end_date"],r={};return Object.keys(e).forEach(function(o){t.searchbar.default_value[o]=i.includes(o)?parseInt(e[o]):n.includes(o)?t.$options.filters.storeDateFormat(e[o]):e[o],r[o]=e[o]}),r},$onChangeCurrentPage:function(t){var e=this;this.$onGetList({page:t,fn:function(){e.$router.push({path:e.$route.path,query:e.setRouteQuery("page",t)})}})},$onChangePageSize:function(t){var e=this;this.$onGetList({pageSize:t,fn:function(){e.$router.push({path:e.$route.path,query:e.setRouteQuery("page_size",t)})}})},$onGetList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.page,i=t.pageSize,n=t.where,r=t.fn;this.list_loading.flag=!0;var o=this.$route.query;this.paginations.current_page=e||parseInt(o.page)||1,this.paginations.page_size=i||parseInt(o.page_size)||this.paginations.page_size;var a=Object.assign(this.getRouteQuery(),{page:this.paginations.current_page,limit:this.paginations.page_size});n&&(a=Object.assign(a,n||{})),this.handleGetList({page_data:a,fn:r})},$initList:function(){this.$onGetList()}}}},pDGx:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ListData",{ref:"list-data",attrs:{List:t.list,ListLoading:t.list_loading,Pagination:t.paginations,FieldList:t.fields,Searchbar:t.searchbar,Toolbar:t.toolbar},on:{onClickBtnAdd:t.$onClickBtnAdd,onChangeCurrentPage:t.$onChangeCurrentPage,onChangePageSize:t.$onChangePageSize,onSearch:t.$onSearch,onSearchReset:t.$onSearchReset,onClickBtnEdit:t.handleEditQuery,onClickBtnBatchDelete:t.onClickBtnBatchDelete,onClickBtnCheckout:t.onClickBtnCheckout}})],1)},staticRenderFns:[]}},"qT/r":function(t,e,i){var n=i("VU/8")(i("9//p"),i("pDGx"),!1,function(t){i("JuZl")},"data-v-958d74ec",null);t.exports=n.exports}});