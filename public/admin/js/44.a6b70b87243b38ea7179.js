webpackJsonp([44],{"/JyU":function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("FormData",{attrs:{FieldList:this.fields,DefaultValue:this.default_value,Toolbar:this.toolbar},on:{onSubmit:this.onSubmit,onCancel:this.onCancel}})],1)},staticRenderFns:[]}},"4VG2":function(t,e,i){var a=i("VU/8")(i("IYBS"),i("/JyU"),!1,null,null,null);t.exports=a.exports},IYBS:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("b6Cg"),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t};e.default={name:"api-edit",mixins:[a.a],data:function(){return{fields:[{key:"asset_id",type:"select",label:"Asset",list:[],custom_attrs:{label:"tree_title",value:"id"}},{key:"url",label:"路徑"},{key:"method",desc:"Please enter api method",label:"代碼"}],default_value:{asset_id:1,url:"",method:""}}},created:function(){this.onUpdateFieldList()},methods:{onSubmit:function(t){var e=this,i=t.data,a=(t.info,t.type);this.params.id&&(i.id=this.params.id),this.$$api_api_save({data:i,fn:function(t){var i=t.data,s=t.msg;e.$message.success(s),e.$onSubmitFinish({type:a,query:{id:i.items.id,pid:i.items.parent_id}})}})},onCancel:function(){this.$router.push(this.$route.path.replace("/edit",""))},onGetView:function(){var t=this;this.$$api_api_get({pathVar:this.params.id,fn:function(e){var i=e.data;t.default_value=s({},t.default_value,i.items)}})},onUpdateFieldList:function(){var t=this;this.$$api_asset_list({fn:function(e){var i=e.data;t.fields[0].list=i.items}})}}}},b6Cg:function(t,e,i){"use strict";e.a={data:function(){return{params:{id:"",pid:""},toolbar:{type:"edit"}}},watch:{$route:function(){this.$initView()}},created:function(){this.$initView()},methods:{$onSubmitFinish:function(t){var e=t.type,i=t.query;switch(e){case"save":this.$router.push({path:this.$route.path,query:i});break;case"savenadd":this.$router.push({path:this.$route.path}),this.$router.go(0);break;case"savenclose":this.$onCancel()}},$onCancel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&this.handleCheckout(t),this.$router.push({path:this.$route.path.replace("/edit",""),query:this.$route.query.from})},onUpdateViewParams:function(){this.params.id=parseInt(this.$route.query.id)||"",this.params.pid=parseInt(this.$route.query.pid)||"",this.$set(this.toolbar,"type",this.params.id?"edit":"add")},$initView:function(){this.onUpdateViewParams(),this.params.id&&this.onGetView()}}}}});