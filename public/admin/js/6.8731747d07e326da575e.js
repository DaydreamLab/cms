webpackJsonp([6],{Ag9o:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Lokx"),a=i.n(n),r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,a=!1,r=void 0;try{for(var d,o=t[Symbol.iterator]();!(n=(d=o.next()).done)&&(i.push(d.value),!e||i.length!==e);n=!0);}catch(t){a=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default={components:{Item:function(){return i.e(5).then(i.bind(null,"t2Pn"))}},data:function(){return{list:[],list_id:"list-"+ +new Date+(1e3*Math.random()).toFixed(0),list_loading:!1,active_id:"",is_adding:!1}},props:{Type:{type:String,required:!0},Category:{type:Object,default:function(){return{}}}},mounted:function(){this.handleGetList()},methods:{onClickBtnAdd:function(){this.is_adding=!0,this.onChangeActive()},onChangeActive:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.active_id=t},handleOrderChange:function(t){var e=this,i=t.id,n=t.index_diff,a=t.order;this.$$api_item_ordering({data:{id:i,index_diff:n,order:a},fn:function(t){var i=t.msg;e.$message.success(i)}})},handleGetList:function(){var t=this;this.list_loading=!0,this.$$api_item_list({data:{category_id:this.Category.id,extension:"item",content_type:this.Type,order_by:"ordering",order:"desc"},fn:function(e){var i=e.data;t.list=i.items,t.$nextTick(function(){t.initSortableList()})},finalFn:function(){t.list_loading=!1}})},initSortableList:function(){var t=this,e=document.getElementById(this.list_id);e&&a.a.create(e,{handle:".sortable-handler",onEnd:function(e){var i=e.newIndex,n=e.oldIndex,a=t.list.splice(n,1),d=r(a,1)[0];t.list.splice(i,0,d),t.handleOrderChange({id:t.list[i].id,index_diff:i-n,order:"desc"})}})}}}},DTOV:function(t,e,i){var n=i("uHCP");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("730d650b",n,!0,{})},G4vn:function(t,e,i){var n=i("VU/8")(i("Ag9o"),i("IYWJ"),!1,function(t){i("DTOV")},"data-v-25a95d17",null);t.exports=n.exports},IYWJ:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.list_loading,expression:"list_loading"}]},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.onClickBtnAdd}},[i("font-awesome-icon",{attrs:{icon:["fal","plus"]}}),t._v("\n    "+t._s(t.$t("TOOLBAR_ADD"))+"\n  ")],1),t._v(" "),t.list.length>0||t.is_adding?i("div",{staticClass:"el-collapse",attrs:{id:t.list_id}},[t.is_adding?i("Item",{attrs:{type:t.Type,data:{extrafield_group_id:t.Category.item_extrafield},category:t.Category,"is-disabled":!1,"is-active":""},on:{updateActive:function(e){t.is_adding=!1},update:t.handleGetList}}):t._e(),t._v(" "),t._l(t.list,function(e){return i("Item",{key:e.id,attrs:{type:t.Type,category:t.Category,data:e,"is-active":t.active_id===e.id,"is-disabled":Boolean(t.active_id&&t.active_id!==e.id)},on:{updateActive:t.onChangeActive,update:t.handleGetList}},[t._v(t._s(e))])})],2):t._e()],1)},staticRenderFns:[]}},uHCP:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".el-collapse[data-v-25a95d17]{margin-top:15px}",""])}});