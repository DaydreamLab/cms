webpackJsonp([79],{"0tC/":function(t,e,i){var a=i("VU/8")(i("t+yo"),i("eQpp"),!1,null,null,null);t.exports=a.exports},PKPN:function(t,e,i){"use strict";e.a={methods:{$initList:function(){this.$set(this.toolbar,"type","-2"===this.$route.query.state?"trash":"list"),this.$onGetList()}}}},eQpp:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("ListData",{ref:"list-data",attrs:{List:t.list,ListLoading:t.list_loading,Sort:t.sort,Pagination:t.paginations,Toolbar:t.toolbar,Searchbar:t.searchbar,FieldList:t.fields},on:{onClickBtnAdd:t.$onClickBtnAdd,onClickBtnEdit:t.handleEditQuery,onClickBtnBatchTrash:t.onClickBtnBatchTrash,onClickBtnBatchRestore:t.onClickBtnBatchRestore,onClickBtnBatchDelete:t.onClickBtnBatchDelete,onClickBtnCheckout:t.onClickBtnCheckout,onChangeCurrentPage:t.$onChangeCurrentPage,onChangePageSize:t.$onChangePageSize,onSearch:t.$onSearch,onSearchReset:t.$onSearchReset,onOrderChange:t.onOrderChange,onSortChange:t.onSortChange}})},staticRenderFns:[]}},nNQx:function(t,e,i){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t};e.a={data:function(){return{list:[],list_loading:{flag:!1},paginations:{current_page:1,total:0,page_size:10,page_sizes:[10,15,20,25,50,100],layout:"total, sizes, prev, pager, next, jumper"}}},watch:{$route:{handler:"$initList",immediate:!0}},methods:{$onClickBtnAdd:function(){this.$router.push(this.$route.path+"/edit")},$onClickBntEdit:function(t){this.$router.push({path:this.$route.path+"/edit",query:n({},t,{from:this.$route.query})})},$onSearchReset:function(){this.$router.push({path:this.$route.path})},$onSearch:function(t){var e=t.data,i={},a=this.$route.query;for(var n in a)i[n]=a[n];for(var s in e)i[s]=e[s],i[s]||delete i[s];this.$router.push({path:this.$route.path,query:i})},setRouteQuery:function(t,e){var i=Object.assign({},this.$route.query);return"object"===(void 0===t?"undefined":a(t))?i=t:i[t]=e,i},getRouteQuery:function(){var t=this,e=this.$route.query,i=["id","pid","category_id","access"],a=["start_date","end_date"],n={};return Object.keys(e).forEach(function(s){t.searchbar.default_value[s]=i.includes(s)?parseInt(e[s]):a.includes(s)?t.$options.filters.storeDateFormat(e[s]):e[s],n[s]=e[s]}),n},$onChangeCurrentPage:function(t){var e=this;this.$onGetList({page:t,fn:function(){e.$router.push({path:e.$route.path,query:e.setRouteQuery("page",t)})}})},$onChangePageSize:function(t){var e=this;this.$onGetList({pageSize:t,fn:function(){e.$router.push({path:e.$route.path,query:e.setRouteQuery("page_size",t)})}})},$onGetList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.page,i=t.pageSize,a=t.where,n=t.fn;this.list_loading.flag=!0;var s=this.$route.query;this.paginations.current_page=e||parseInt(s.page)||1,this.paginations.page_size=i||parseInt(s.page_size)||this.paginations.page_size;var r=Object.assign(this.getRouteQuery(),{page:this.paginations.current_page,limit:this.paginations.page_size});a&&(r=Object.assign(r,a||{})),this.handleGetList({page_data:r,fn:n})},$initList:function(){this.$onGetList()}}}},"t+yo":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("h+Z4"),n=i("nNQx"),s=i("PKPN");e.default={name:"item-list",mixins:[a.a,n.a,s.a],data:function(){var t=this;return{sort:{show:!0},fields:[{key:"title",label:this.$t("FIELD_TITLE_LABEL"),type:"editable",width:300},{key:"featured",label:this.$t("OPTION_FEATURED"),type:"icon",width:"80",formatter:function(t){return{style:{color:1===t?"#fdd034":"#cfd3da"},icon:["fas","star"]}}},{key:"state",label:this.$t("OPTION_STATE"),type:"label",width:"120",formatter:function(e){return{text:t.$t({1:"PUBLISHED",0:"UNPUBLISHED","-1":"ARCHIVED","-2":"TRASHED",2:"PENDING",3:"EXPIRED"}[e]),color:"item_state_"+e+"_color"}}},{key:"category_title",label:this.$t("OPTION_CATEGORY"),width:"120"},{key:"creator",label:this.$t("LIST_DATA_AUTHOR_LABEL")},{key:"updater",label:this.$t("LIST_DATA_MODIFIED_BY_LABEL"),width:"100"},{key:"created_at",label:this.$t("LIST_DATA_CREATED_DATE_LABEL"),formatter:function(e){return t.$options.filters.displayDateFormat(e.created_at)}},{key:"updated_at",label:this.$t("LIST_DATA_MODIFIED_DATE_LABEL"),formatter:function(e){return t.$options.filters.displayDateFormat(e.updated_at)}},{key:"hits",label:this.$t("LIST_DATA_HITS_LABEL")},{key:"introimage",label:this.$t("LIST_DATA_INTRO_IMAGE_LABEL"),type:"icon",sort:!1,formatter:function(t){return{icon:t?["fal","image"]:""}}},{key:"image",label:this.$t("LIST_DATA_IMAGE_LABEL"),type:"icon",sort:!1,formatter:function(t){return{icon:t?["fal","image"]:""}}},{key:"language_title",label:this.$t("OPTION_LANGUAGE"),width:"100",formatter:function(e){return"*"===e.language?t.$t("ALL_LANGUAGE"):e.language_title}},{key:"id",label:this.$t("LIST_DATA_HEADING_ID"),width:"60"}],toolbar:{type:"list",custom:[{text:this.$t("TOOLBAR_PUBLISH"),method:"updateState",fn:function(e){var i=e.ids;t.onClickBtnUpdateState({ids:i,state:1})}},{text:this.$t("TOOLBAR_UNPUBLISH"),method:"updateState",fn:function(e){var i=e.ids;t.onClickBtnUpdateState({ids:i,state:0})}},{text:this.$t("TOOLBAR_FEATURED"),method:"updateFeatured",fn:function(e){var i=e.ids;t.onClickBtnUpdatFeatured({ids:i,featured:1})}},{text:this.$t("TOOLBAR_UNFEATURED"),method:"updateFeatured",fn:function(e){var i=e.ids;t.onClickBtnUpdatFeatured({ids:i,featured:0})}},{text:this.$t("TOOLBAR_CHECKOUT"),method:"checkout",fn:function(e){var i=e.ids;t.onClickBtnCheckout({ids:i})}}]},searchbar:{fields:[{key:"search",desc:this.$t("TOOLBAR_KEYWORDS"),clearable:!0},{key:"featured",type:"select",desc:this.$t("OPTION_FEATURED"),clearable:!0,list:[{value:"1",text:this.$t("FEATURED")},{value:"0",text:this.$t("NOT_FEATURED")}]},{key:"state",type:"select",desc:this.$t("OPTION_STATE"),clearable:!0,list:[{value:"1",text:this.$t("PUBLISHED")},{value:"0",text:this.$t("UNPUBLISHED")},{value:"-1",text:this.$t("ARCHIVED")},{value:"-2",text:this.$t("TRASHED")}]},{key:"category_id",type:"select",desc:this.$t("OPTION_CATEGORY"),clearable:!0,list:this.$store.getters.item_article_category_list,custom_attrs:{label:"tree_list_title",value:"id"}},{key:"language",type:"select",desc:this.$t("OPTION_LANGUAGE"),clearable:!0,list:this.$store.getters.language_list,custom_attrs:{label:"title",value:"sef"}},{key:"access",type:"select",desc:this.$t("FIELD_ACCESS_LEVEL"),clearable:!0,list:this.$store.getters.viewlevel_list,custom_attrs:{label:"title",value:"id"}}],default_value:{search:"",state:"",featured:"",category_id:"",language:"",access:""}}}},created:function(){this.$getFieldList({item_article_category:3,language:4,viewlevel:5},"searchbar")},methods:{onClickBtnCheckout:function(t){var e=this,i=t.data,a=t.ids,n=a||[i.id];this.$$api_item_checkout({data:{ids:n},fn:function(t){var i=t.msg;e.$message.success(i),e.$onGetList()}})},onOrderChange:function(t){var e=this,i=t.id,a=t.index_diff,n=t.order;this.$$api_item_ordering({data:{id:i,index_diff:a,order:n},fn:function(t){var i=t.msg;e.$message.success(i)}})},onSortChange:function(t){this.$onGetList({where:{order_by:"ordering",order:t.replace("ending","")}})},onClickBtnUpdatFeatured:function(t){var e=this,i=t.ids,a=t.featured;this.$$api_item_updateFeatured({data:{ids:i,featured:a},fn:function(t){var i=t.msg;e.$message.success(i),e.$onGetList()}})},onClickBtnBatchTrash:function(t){var e=t.ids,i=t.state;this.onClickBtnUpdateState({ids:e,state:i})},onClickBtnBatchRestore:function(t){var e=t.ids,i=t.state;this.onClickBtnUpdateState({ids:e,state:i})},onClickBtnUpdateState:function(t){var e=this,i=t.ids,a=t.state;this.$$api_item_updateState({data:{ids:i,state:a},fn:function(t){var i=t.msg;e.$message.success(i),e.$onGetList()}})},onClickBtnBatchDelete:function(t){var e=this,i=t.ids;t.datas;this.$confirm(this.$t("GLOBAL_CONFIRM_DELETE")).then(function(){e.$$api_item_delete({data:{ids:i},fn:function(t){t.data;e.$onGetList()}})})},handleEditQuery:function(t){var e=t.data;this.$onClickBntEdit({id:e.id})},handleGetList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.page_data,a=e.fn;this.$$api_item_list({data:i,fn:function(e){var i=e.data;t.list_loading.flag=!1,t.list=i.items,t.paginations.total=i.pagination.total,a&&a()}})}}}}});